(function(t){function e(e){for(var o,s,i=e[0],u=e[1],c=e[2],l=0,m=[];l<i.length;l++)s=i[l],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&m.push(r[s][0]),r[s]=0;for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(t[o]=u[o]);d&&d(e);while(m.length)m.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],o=!0,i=1;i<n.length;i++){var u=n[i];0!==r[u]&&(o=!1)}o&&(a.splice(e--,1),t=s(s.s=n[0]))}return t}var o={},r={app:0},a=[];function s(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=o,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(n,o,function(e){return t[e]}.bind(null,o));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var d=u;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0e5b":function(t,e,n){},"140e":function(t,e,n){},"22de":function(t,e,n){"use strict";n("e535")},2327:function(t,e,n){"use strict";n("2d03")},2474:function(t,e,n){"use strict";n("ff30")},"2b9c":function(t,e,n){"use strict";n("3071")},"2d03":function(t,e,n){},3071:function(t,e,n){},3611:function(t,e,n){"use strict";n("62dd")},3785:function(t,e,n){},"387c":function(t,e,n){"use strict";n("3c37")},"38db":function(t,e,n){"use strict";n("3785")},"3aff":function(t,e,n){},"3bb1":function(t,e,n){},"3c37":function(t,e,n){},"49a0":function(t,e,n){},5160:function(t,e,n){"use strict";n("0e5b")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("router-view")},a=[],s={name:"App"},i=s,u=n("2877"),c=Object(u["a"])(i,r,a,!1,null,"1aec83e6",null),d=c.exports,l=n("8c4f"),m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Header",{attrs:{activeI:t.activeIndex}}),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingStatic,expression:"loadingStatic"}],staticClass:"container"},[n("el-card",{staticClass:"box-card"},[n("el-carousel",{attrs:{"indicator-position":"outside"}},t._l(t.imgs,(function(t){return n("el-carousel-item",{key:t},[n("img",{attrs:{src:t,alt:"加载错误！！！"}})])})),1)],1),n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("h3",[t._v("商品展示区域")])]),n("div",{staticStyle:{overflow:"auto",height:"640px","margin-bottom":"20px"}},[n("ul",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.load,expression:"load"}],attrs:{"infinite-scroll-disabled":"disabled","infinite-scroll-immediate":"false"}},t._l(t.goodsList,(function(e){return n("li",{key:e._id},[n("router-link",{attrs:{to:"/jumpDetail?_id="+e._id}},[n("div",{staticClass:"image"},[n("img",{attrs:{src:e.goodsSRC,alt:"加载错误！！！"}})]),n("div",{staticClass:"title"},[n("h2",[t._v(t._s(e.goodsName))])]),n("div",{staticClass:"price"},[n("p",[n("del",[t._v("原价："+t._s(e.goodsOldPrice))])]),n("p",[t._v("现价："+t._s(e.goodsPrice))]),n("p",[t._v("数量："+t._s(e.goodsSum))])])])],1)})),0),t.loading?n("p",{staticStyle:{color:"red"}},[t._v("加载中...")]):t._e(),t.noMore?n("p",{staticStyle:{color:"red"}},[t._v("没有更多了")]):t._e()]),t.noMore?t._e():n("p",[t._v("下拉更新加载更多！")])])],1)],1)},g=[],p=n("2909"),f=n("1da1"),h=(n("96cf"),n("99af"),n("b775")),v=n.n(h),S={name:"Goods",data:function(){return{loadingStatic:!0,loading:!1,activeIndex:"1",Skip:0,count:0,goodsList:[],imgs:["https://img11.360buyimg.com/n1/jfs/t1/179770/17/12742/145428/60e2ec6bE197a8dd5/fc13551194e20ba0.jpg","https://img11.360buyimg.com/n1/jfs/t1/208131/34/1381/105367/614a9633Ea9c487bd/6cac5f26c55eacd6.jpg","https://img12.360buyimg.com/n1/jfs/t1/127643/39/19646/110844/60b4975cE7b229c7b/71f18956d90684ea.jpg"]}},created:function(){this.getGoods()},disabled:function(){this.loadingStatic=!0},computed:{noMore:function(){return this.goodsList.length>=this.count},disabled:function(){return this.loading||this.noMore}},methods:{load:function(){var t=this;this.loading=!0,setTimeout((function(){t.getGoods(),t.loading=!1}),1e3)},getGoods:function(){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/getGoods",{params:{count:t.Skip}});case 2:n=e.sent,o=n.data,t.Skip<t.count&&(t.Skip+=12),t.goodsList=[].concat(Object(p["a"])(t.goodsList),Object(p["a"])(o.data)),t.count=o.goodsCount,t.loadingStatic=!1;case 8:case"end":return e.stop()}}),e)})))()}}},y=S,b=(n("8086"),Object(u["a"])(y,m,g,!1,null,"9053e1d6",null)),x=b.exports,_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"DetailContainer"},[n("ul",[n("li",[n("div",{staticClass:"image"},[n("img",{attrs:{src:t.goods.goodsSRC,alt:"加载错误！！！"}})])]),n("li",[n("el-form",{attrs:{"label-width":"100px"}},[n("el-form-item",{attrs:{label:"商品名字："}},[n("h2",[t._v(t._s(t.goods.goodsName))])]),n("el-form-item",{attrs:{label:"商品价格："}},[n("h2",{staticStyle:{color:"red"}},[t._v("￥"+t._s(t.goods.goodsPrice))])]),n("el-form-item",{attrs:{label:"商品详情："}},[n("p",{staticStyle:{"word-wrap":"break-word"}},[t._v(t._s(t.goods.goodsDetail))])]),n("el-form-item",{attrs:{label:"商品库存："}},[n("p",[t._v(t._s(t.goods.goodsSum))])]),n("el-form-item",{staticStyle:{"margin-left":"-10px"},attrs:{label:"购买数量:"}},[n("el-row",[n("el-button",{on:{click:t.reduce}},[t._v("-")]),n("el-input",{staticStyle:{width:"100px","margin-left":"10px","margin-right":"10px"},attrs:{type:"number"},model:{value:t.buySum,callback:function(e){t.buySum=e},expression:"buySum"}}),n("el-button",{on:{click:t.add}},[t._v("+")])],1)],1),n("el-form-item",{attrs:{"label-width":"30px"}},[n("el-button",{attrs:{type:"primary"},on:{click:t.onBuy}},[t._v("立即购买")]),n("el-button",{attrs:{type:"danger"},on:{click:t.addShoppingCar}},[t._v("加入购物车")]),n("el-button",{staticStyle:{"margin-left":"80px"},on:{click:t.goBack}},[t._v("返回")])],1)],1)],1)])])},k=[],w=(n("d3b7"),n("25f0"),n("a9e3"),n("ac1f"),n("1276"),n("5319"),{name:"Detail",data:function(){return{buySum:1,goods:{}}},created:function(){this.getGoodsDetail()},watch:{buySum:function(t,e){if(this.goods.goodsSum>0){var n=this.buySum.toString(),o=t.toString();o=o.charAt(0),""!==t?Number(t)>this.goods.goodsSum?this.buySum=this.goods.goodsSum:(1===n.indexOf("e")||1===n.indexOf("E")||o.charCodeAt()<=48||o.charCodeAt()>57)&&(this.$message({type:"error",showClose:!0,duration:"1000",message:"商品数量不合法！！！"}),this.buySum=1):this.$message({type:"error",showClose:!0,duration:"1000",message:"商品数量不合法！！！"})}else this.$alert("已无库存！","提示",{confirmButtonText:"确定"})}},methods:{getGoodsDetail:function(){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function e(){var n,o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=location.hash.split("?")[1].split("=")[1],e.next=3,v.a.get("/getGoodsOne",{params:{_id:n}});case 3:o=e.sent,r=o.data,t.goods=r.goods;case 6:case"end":return e.stop()}}),e)})))()},add:function(){var t=this.buySum.toString();""===t?this.buySum=1:this.buySum<this.goods.goodsSum&&(this.buySum=parseInt(this.buySum),this.buySum+=1)},reduce:function(){var t=this.buySum.toString();""===t?this.buySum=1:this.buySum>1&&(this.buySum=parseInt(this.buySum),this.buySum-=1)},onBuy:function(){var t=this,e=this.buySum.toString();if(""===e)return this.$message({type:"error",showClose:!0,duration:"1000",message:"商品数量不合法！！！"}),void(this.buySum=1);this.$confirm("商品名称：<h3>"+this.goods.goodsName+"</h3>商品数量：<h3>"+this.buySum+"</h3>商品总价：<h3>"+this.buySum*this.goods.goodsPrice+"</h3>","商品信息",{confirmButtonText:"购买",cancelButtonText:"取消",dangerouslyUseHTMLString:!0}).then((function(){t.$confirm('<h4">请付款:</h4><h3 style="color:red">'+t.buySum*t.goods.goodsPrice+"</h3>","付款界面",{confirmButtonText:"确认",cancelButtonText:"取消",dangerouslyUseHTMLString:!0}).then(Object(f["a"])(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.f2();case 2:if(n=e.sent,n.state){e.next=7;break}t.$alert("库存不足！","提示",{confirmButtonText:"确定",callback:function(){t.$router.go(0)}}),e.next=13;break;case 7:return e.next=9,t.f(!0);case 9:o=e.sent,t.f3(n.goodsSum-t.buySum),t.$router.go(0),o.state&&t.$message({type:"success",showClose:!0,duration:"1000",message:"支付成功！"});case 13:case"end":return e.stop()}}),e)})))).catch(Object(f["a"])(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.f2();case 2:if(n=e.sent,n.state){e.next=7;break}t.$alert("库存不足！","提示",{confirmButtonText:"确定",callback:function(){t.$router.go(0)}}),e.next=13;break;case 7:return e.next=9,t.f(!1);case 9:o=e.sent,t.f3(n.goodsSum-t.buySum),t.$router.go(0),o.state&&t.$message({type:"error",showClose:!0,duration:"1000",message:"支付失败！"});case 13:case"end":return e.stop()}}),e)}))))})).catch((function(){}))},f:function(t){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function n(){var o,r,a,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=location.hash.split("?")[1].split("=")[1],r=JSON.parse(localStorage.getItem("token")),n.next=4,v.a.get("/addOrder",{params:{userId:r.userId,goodsId:o,buySum:e.buySum,payState:t,deliverState:!1,receiveState:!1}});case 4:return a=n.sent,s=a.data,n.abrupt("return",s);case 7:case"end":return n.stop()}}),n)})))()},f2:function(){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function e(){var n,o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=location.hash.split("?")[1].split("=")[1],e.next=3,v.a.get("/getGoodsOne",{params:{_id:n}});case 3:if(o=e.sent,r=o.data,!(t.buySum<=r.goods.goodsSum)){e.next=9;break}return e.abrupt("return",{state:!0,goodsSum:r.goods.goodsSum});case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e)})))()},f3:function(t){var e=location.hash.split("?")[1].split("=")[1];v.a.get("/updateGoodsSum",{params:{goodsId:e,goodsSum:t}})},addShoppingCar:function(){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function e(){var n,o,r,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.goods.goodsSum<=0)){e.next=3;break}return t.$alert("已无库存！","提示",{confirmButtonText:"确定"}),e.abrupt("return");case 3:if(n=t.buySum.toString(),""!==n){e.next=8;break}return t.$message({type:"error",showClose:!0,duration:"1000",message:"商品数量不合法！！！"}),t.buySum=1,e.abrupt("return");case 8:return o=location.hash.split("?")[1].split("=")[1],r=JSON.parse(localStorage.getItem("token")),e.next=12,v.a.get("/addShoppingCar",{params:{userId:r.userId,goodsId:o,buySum:t.buySum,goodsSum:t.goods.goodsSum}});case 12:a=e.sent,s=a.data,s.static&&t.$message({type:"success",showClose:!0,duration:"1000",message:s.news});case 15:case"end":return e.stop()}}),e)})))()},goBack:function(){this.$router.replace("/")}}}),O=w,j=(n("d8a6"),Object(u["a"])(O,_,k,!1,null,"63e9b7be",null)),C=j.exports,I=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Header",{attrs:{activeI:t.activeIndex}}),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingStatic,expression:"loadingStatic"}],staticClass:"container"},[t.isEmpty?n("el-empty",{attrs:{description:"购物车空空的哦！！！"}},[n("router-link",{attrs:{to:"/"}},[n("el-button",[t._v("去购物")])],1)],1):t._l(t.goodsList,(function(e){return n("GoodsCommon",{key:e._id,scopedSlots:t._u([{key:"goodsImg",fn:function(){return[n("el-image",{staticStyle:{width:"60px",height:"60px"},attrs:{src:e.goodsSRC,fit:"fit",lazy:""}})]},proxy:!0},{key:"goodsDetail",fn:function(){return[n("h4",[t._v(" "+t._s(e.goodsName)+" "),n("i",{staticStyle:{"margin-left":"30px"}},[t._v("单价："+t._s(e.goodsPrice))]),n("i",{staticStyle:{"margin-left":"30px"}},[t._v("库存："+t._s(e.goodsSum))])]),n("p",[t._v(t._s(e.goodsDetail))])]},proxy:!0},{key:"goodsBuySum",fn:function(){return[n("ShoppingCarSum",{attrs:{buySum2:e.buySum,goodsSum2:e.goodsSum,goodsId2:e._id}})]},proxy:!0},{key:"goodsBtn",fn:function(){return[n("el-button",{attrs:{type:"danger"},on:{click:function(n){return t.onDelete(e.shoppingCarId)}}},[n("b",[t._v("删除")])])]},proxy:!0},{key:"goodsBuy",fn:function(){return[n("el-button",{attrs:{type:"success"},on:{click:function(n){return t.onBuy(e._id,e.shoppingCarId,e.goodsName,e.goodsPrice)}}},[n("b",[t._v("购买")])])]},proxy:!0}],null,!0)})}))],2)],1)},$=[],A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"goodsCommon"},[n("div",{staticClass:"goodsImg"},[t._t("goodsImg")],2),n("div",{staticClass:"goodsDetail"},[t._t("goodsDetail")],2),n("div",{staticClass:"goodsBuySum"},[t._t("goodsBuySum")],2),n("div",{staticClass:"goodsBtn"},[t._t("goodsBtn")],2),n("div",{staticClass:"goodsBuy"},[t._t("goodsBuy")],2)])},B=[],D={data:function(){return{name:"GoodsCommon"}},methods:{}},R=D,G=(n("ef92"),Object(u["a"])(R,A,B,!1,null,"330f7804",null)),E=G.exports,L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-button",{on:{click:t.reduce}},[t._v("-")]),n("el-input",{staticStyle:{width:"100px","margin-left":"10px","margin-right":"10px"},attrs:{type:"number"},model:{value:t.buySum,callback:function(e){t.buySum=e},expression:"buySum"}}),n("el-button",{on:{click:t.add}},[t._v("+")])],1)},N=[],T={props:["buySum2","goodsSum2","goodsId2"],data:function(){return{name:"ShoppingCarSum",buySum:this.buySum2,goodsSum:this.goodsSum2}},watch:{buySum:function(t,e){if(this.goodsSum>0){var n=this.buySum.toString(),o=t.toString();o=o.charAt(0),""!==t?t>this.goodsSum?this.buySum=this.goodsSum:1===n.indexOf("e")||1===n.indexOf("E")||o.charCodeAt()<=48||o.charCodeAt()>57?(this.$message({type:"error",showClose:!0,duration:"1000",message:"商品数量不合法！！！"}),this.buySum=1):this.setShoppingCarSum():this.$message({type:"error",showClose:!0,duration:"1000",message:"商品数量不合法！！！"})}else this.$alert("已无库存！","提示",{confirmButtonText:"确定"})}},created:function(){},methods:{add:function(){var t=this.buySum.toString();""===t?this.buySum=1:this.buySum<this.goodsSum&&(this.buySum=parseInt(this.buySum),this.buySum+=1)},reduce:function(){var t=this.buySum.toString();""===t?this.buySum=1:this.buySum>1&&(this.buySum=parseInt(this.buySum),this.buySum-=1)},setShoppingCarSum:function(){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function e(){var n,o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=JSON.parse(localStorage.getItem("token")),e.next=3,v.a.get("/updataShoopingCar",{params:{userId:n.userId,goodsId:t.goodsId2,buySum:t.buySum}});case 3:o=e.sent,r=o.data,t.$message({type:"success",showClose:!0,duration:"1000",message:r.news});case 6:case"end":return e.stop()}}),e)})))()}}},P=T,U=Object(u["a"])(P,L,N,!1,null,"58caff82",null),H=U.exports,M={name:"ShoppingCar",data:function(){return{loadingStatic:!0,isEmpty:!0,activeIndex:"2",goodsList:[]}},components:{GoodsCommon:E,ShoppingCarSum:H},created:function(){this.getGoods()},methods:{getGoods:function(){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function e(){var n,o,r,a,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=JSON.parse(localStorage.getItem("token")),e.next=3,v.a.get("/getShoppingCar",{params:{userId:n.userId}});case 3:if(o=e.sent,r=o.data,""===r.goodsData){e.next=18;break}a=0;case 7:if(!(a<r.goodsData.length)){e.next=18;break}return e.next=10,v.a.get("/getGoodsOne",{params:{_id:r.goodsData[a].goodsID}});case 10:s=e.sent,i=s.data,i.goods.buySum=r.goodsData[a].buySum,i.goods.shoppingCarId=r.goodsData[a]._id,t.goodsList.push(i.goods);case 15:a++,e.next=7;break;case 18:t.isEmpty=r.isEmpty,t.loadingStatic=!1;case 20:case"end":return e.stop()}}),e)})))()},onBuy:function(t,e,n,o){var r=this;return Object(f["a"])(regeneratorRuntime.mark((function a(){var s,i,u;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=JSON.parse(localStorage.getItem("token")),a.next=3,v.a.get("/getShoppingCarOne",{params:{userId:s.userId,goodsId:t}});case 3:i=a.sent,u=i.data,r.$confirm("商品名称：<h3>"+n+"</h3>商品数量：<h3>"+u.buySum+"</h3>商品总价：<h3>"+u.buySum*o+"</h3>","商品信息",{confirmButtonText:"购买",cancelButtonText:"取消",dangerouslyUseHTMLString:!0}).then((function(){r.$confirm('<h4">请付款:</h4><h3 style="color:red">'+u.buySum*o+"</h3>","付款界面",{confirmButtonText:"确定",cancelButtonText:"取消",dangerouslyUseHTMLString:!0}).then(Object(f["a"])(regeneratorRuntime.mark((function n(){var o,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,r.f3(t,u.buySum);case 2:if(o=n.sent,o.state){n.next=7;break}r.$alert("库存不足！","提示",{confirmButtonText:"确定",callback:function(){r.$router.go(0)}}),n.next=14;break;case 7:return n.next=9,r.f(t,u.buySum,!0);case 9:a=n.sent,r.f2(e),r.f4(t,o.goodsSum-u.buySum),r.$router.go(0),a.state&&r.$message({type:"success",showClose:!0,duration:"1000",message:"支付成功！"});case 14:case"end":return n.stop()}}),n)})))).catch(Object(f["a"])(regeneratorRuntime.mark((function n(){var o,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,r.f3(t,u.buySum);case 2:if(o=n.sent,o.state){n.next=7;break}r.$alert("库存不足！","提示",{confirmButtonText:"确定",callback:function(){r.$router.go(0)}}),n.next=14;break;case 7:return n.next=9,r.f(t,u.buySum,!1);case 9:a=n.sent,r.f2(e),r.f4(t,o.goodsSum-u.buySum),r.$router.go(0),a.state&&r.$message({type:"error",showClose:!0,duration:"1000",message:"支付失败！"});case 14:case"end":return n.stop()}}),n)}))))})).catch((function(){}));case 6:case"end":return a.stop()}}),a)})))()},f:function(t,e,n){return Object(f["a"])(regeneratorRuntime.mark((function o(){var r,a,s,i;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return r=t,a=JSON.parse(localStorage.getItem("token")),o.next=4,v.a.get("/addOrder",{params:{userId:a.userId,goodsId:r,buySum:e,payState:n,deliverState:!1,receiveState:!1}});case 4:return s=o.sent,i=s.data,o.abrupt("return",i);case 7:case"end":return o.stop()}}),o)})))()},f2:function(t){v.a.get("/deleteShoopingCar",{params:{shoppingCarId:t}})},f3:function(t,e){return Object(f["a"])(regeneratorRuntime.mark((function n(){var o,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,v.a.get("/getGoodsOne",{params:{_id:t}});case 2:if(o=n.sent,r=o.data,!(e<=r.goods.goodsSum)){n.next=8;break}return n.abrupt("return",{state:!0,goodsSum:r.goods.goodsSum});case 8:return n.abrupt("return",!1);case 9:case"end":return n.stop()}}),n)})))()},f4:function(t,e){v.a.get("/updateGoodsSum",{params:{goodsId:t,goodsSum:e}})},onDelete:function(t){var e=this;this.$confirm('<h4">是否确认</h4><h3 style="color:red">删除</h3>',"确认删除界面",{confirmButtonText:"确定",cancelButtonText:"取消",dangerouslyUseHTMLString:!0}).then((function(){v.a.get("deleteShoopingCar",{params:{shoppingCarId:t}}),e.$router.go(0)})).catch((function(){}))}}},J=M,z=Object(u["a"])(J,I,$,!1,null,"49f70fe0",null),q=z.exports,F=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"Order"},[n("Header",{attrs:{activeI:t.activeIndex}}),n("div",{staticClass:"OrderContainer"},[n("OrderSide"),n("router-view")],1)],1)},K=[],Q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"OrderSideContainer"},[n("div",{staticClass:"side"},[n("div",[n("router-link",{class:t.cl1,attrs:{to:"/jumpOrder/jumpAllOrder"}},[t._v("全部订单")])],1),n("div",[n("router-link",{class:t.cl2,attrs:{to:"/jumpOrder/jumpNoPayOrder"}},[t._v("未付款订单")])],1),n("div",[n("router-link",{class:t.cl3,attrs:{to:"/jumpOrder/jumpNotDeliverGoodsOrder"}},[t._v("待发货订单")])],1),n("div",[n("router-link",{class:t.cl4,attrs:{to:"/jumpOrder/jumpNotReceiveGoodsOrder"}},[t._v("待收货订单")])],1)])])},V=[],W=new o["default"],X={data:function(){return{name:"OrderSide",bgClass:1,cl1:"",cl2:"",cl3:"",cl4:""}},watch:{bgClass:{handler:function(){this.BtnBG()},immediate:!0}},methods:{BtnBG:function(){var t=this;switch(W.$on("cl1",(function(e){t.bgClass=e})),W.$on("cl2",(function(e){t.bgClass=e})),W.$on("cl3",(function(e){t.bgClass=e})),W.$on("cl4",(function(e){t.bgClass=e})),this.bgClass){case 1:this.cl1="cl",this.cl2="",this.cl3="",this.cl4="";break;case 2:this.cl1="",this.cl2="cl",this.cl3="",this.cl4="";break;case 3:this.cl1="",this.cl2="",this.cl3="cl",this.cl4="";break;case 4:this.cl1="",this.cl2="",this.cl3="",this.cl4="cl";break}}}},Y=X,Z=(n("38db"),Object(u["a"])(Y,Q,V,!1,null,"0f542006",null)),tt=Z.exports,et={name:"Order",data:function(){return{activeIndex:"3"}},components:{OrderSide:tt}},nt=et,ot=(n("6d54"),Object(u["a"])(nt,F,K,!1,null,"e559fbd0",null)),rt=ot.exports,at=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Header",{attrs:{activeI:t.activeIndex}}),n("div",{staticClass:"container"},[n("h2",{staticStyle:{padding:"30px 0 30px 0"}},[t._v("用户名："+t._s(t.username))]),n("el-button",{on:{click:t.updateUser}},[t._v("修改用户信息")])],1)],1)},st=[],it={name:"ShoppingCar",data:function(){return{loading:!1,activeIndex:"4-1",username:""}},created:function(){this.getUser()},methods:{getUser:function(){this.username=JSON.parse(localStorage.getItem("token")).username},updateUser:function(){var t=this;this.$prompt("请输入原密码","认证界面",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(n){var o,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=n.value,e.next=3,v.a.get("/getUser",{params:{username:t.username,password:o}});case 3:r=e.sent,a=r.data,a.data===t.username?t.$prompt("请输入新密码","修改界面",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(n){var o,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=n.value,e.next=3,v.a.get("/updateUser",{params:{username:t.username,password:o}});case 3:r=e.sent,a=r.data,t.$message({type:"success",message:a.data,duration:"1000"});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(){})):t.$message({type:"error",message:a.data,duration:"2000"});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(){}))}}},ut=it,ct=Object(u["a"])(ut,at,st,!1,null,"4931f6c2",null),dt=ct.exports,lt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingStatic,expression:"loadingStatic"}],staticClass:"positionDiv"},[t._m(0),n("div",[n("label",{attrs:{for:"username"}},[t._v("账 号：")]),n("el-input",{attrs:{id:"username",placeholder:"请输入账号",clearable:""},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),n("div",[n("label",{attrs:{for:"password"}},[t._v("密 码：")]),n("el-input",{attrs:{id:"password",placeholder:"请输入密码","show-password":""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),n("div",{staticClass:"tj"},[n("el-button",{on:{click:t.submin}},[t._v("提交")]),n("el-button",{on:{click:t.reset}},[t._v("重置")]),n("el-button",{on:{click:t.jumpRegister}},[t._v("注册")]),n("el-button",{on:{click:t.jumpIndex}},[t._v("首页")])],1)])},mt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tt"},[n("h1",[t._v("登录界面")])])}],gt={name:"Login",data:function(){return{loadingStatic:!0,username:"",password:""}},created:function(){this.signIn()},mounted:function(){this.loadingStatic=!1},destroyed:function(){this.loadingStatic=!0},methods:{signIn:function(){var t=localStorage.getItem("token");null===t&&this.$message({message:"请登录！",type:"error",duration:"1000"})},submin:function(){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function e(){var n,o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.loadingStatic=!0,""!==t.username&&""!==t.password){e.next=6;break}t.loadingStatic=!1,t.$message({message:"用户名或密码不能为空！",type:"error",duration:"1000"}),e.next=12;break;case 6:if(""===t.username||""===t.password){e.next=12;break}return e.next=9,v.a.get("/getUser",{params:{username:t.username,password:t.password}});case 9:n=e.sent,o=n.data,o.data===t.username?(r={userId:o.userId,username:o.data},localStorage.setItem("token",JSON.stringify(r)),t.$message({message:"欢迎您："+o.data,type:"success",duration:"1000"}),t.$router.replace("/")):(t.loadingStatic=!1,t.$message.error(o.data));case 12:case"end":return e.stop()}}),e)})))()},reset:function(){this.username="",this.password=""},jumpRegister:function(){this.$router.replace("/jumpRegister")},jumpIndex:function(){this.$router.replace("/")}}},pt=gt,ft=(n("22de"),Object(u["a"])(pt,lt,mt,!1,null,"e4a78910",null)),ht=ft.exports,vt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingStatic,expression:"loadingStatic"}],staticClass:"positionDiv"},[t._m(0),n("div",[n("label",{attrs:{for:"username"}},[t._v("账 号：")]),n("el-input",{attrs:{id:"username",placeholder:"请输入账号",clearable:""},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),n("div",[n("label",{attrs:{for:"password"}},[t._v("密 码：")]),n("el-input",{attrs:{id:"password",placeholder:"请输入密码","show-password":""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),n("div",[n("label",{attrs:{for:"password2"}},[t._v("重复密码：")]),n("el-input",{attrs:{id:"password2",placeholder:"请重复密码","show-password":""},model:{value:t.password2,callback:function(e){t.password2=e},expression:"password2"}})],1),n("div",{staticClass:"tj"},[n("el-button",{on:{click:t.submin}},[t._v("提交")]),n("el-button",{on:{click:t.reset}},[t._v("重置")]),n("el-button",{on:{click:t.jumpLogin}},[t._v("登录")]),n("el-button",{on:{click:t.jumpIndex}},[t._v("首页")])],1)])},St=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tt"},[n("h1",[t._v("注册界面")])])}],yt={name:"Login",data:function(){return{loadingStatic:!0,username:"",password:"",password2:""}},mounted:function(){this.loadingStatic=!1},destroyed:function(){this.loadingStatic=!0},methods:{submin:function(){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function e(){var n,o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.loadingStatic=!0,""!==t.password&&""!==t.password){e.next=6;break}t.loadingStatic=!1,t.$message.error("用户名或密码不能为空！！！"),e.next=17;break;case 6:if(t.password!==t.password2){e.next=15;break}return e.next=9,v.a.post("/addUser",{username:t.username,password:t.password});case 9:n=e.sent,o=n.data,t.loadingStatic=!1,o.data===t.username?(r={userId:o.userId,username:o.data},localStorage.setItem("token",JSON.stringify(r)),t.$message({message:"欢迎您："+o.data,type:"success"}),t.$router.replace("/")):(t.loadingStatic=!1,t.$message.error(o.data)),e.next=17;break;case 15:t.loadingStatic=!1,t.$message.error("密码和重复密码不一致！！！");case 17:case"end":return e.stop()}}),e)})))()},reset:function(){this.username="",this.password="",this.password2=""},jumpLogin:function(){this.$router.replace("/jumpLogin")},jumpIndex:function(){this.$router.replace("/")}}},bt=yt,xt=(n("2474"),Object(u["a"])(bt,vt,St,!1,null,"61df8ea4",null)),_t=xt.exports,kt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingStatic,expression:"loadingStatic"}],staticClass:"AllOrderContainer"},[t.isEmpty?n("el-empty",{attrs:{description:"购物车空空的哦！！！"}},[n("router-link",{attrs:{to:"/"}},[n("el-button",[t._v("去购物")])],1)],1):t._l(t.goodsList,(function(e){return n("GoodsCommon",{key:e.createAt,scopedSlots:t._u([{key:"goodsImg",fn:function(){return[n("el-image",{staticStyle:{width:"60px",height:"60px"},attrs:{src:e.goodsSRC,fit:"fit",lazy:""}})]},proxy:!0},{key:"goodsDetail",fn:function(){return[n("h4",[t._v(" "+t._s(e.goodsName)+" "),n("i",{staticStyle:{"margin-left":"20px"}},[t._v("单价：￥"+t._s(e.goodsPrice))])]),n("p",[t._v(t._s(e.goodsDetail))])]},proxy:!0},{key:"goodsBuySum",fn:function(){return[n("OrderSum",{attrs:{buySum2:e.buySum,goodsPrice2:e.goodsPrice}})]},proxy:!0},{key:"goodsBtn",fn:function(){return[n("el-button",{attrs:{type:"danger"},on:{click:function(n){return t.onDelete(e._id,e.orderId,e.goodsSum,e.buySum,e.receiveState)}}},[n("b",[t._v("删除")])])]},proxy:!0},{key:"goodsBuy",fn:function(){return["false"===e.payState&&"false"===e.deliverState&&"false"===e.receiveState?n("el-button",{attrs:{type:"success"},on:{click:function(n){return t.onBuy(e.orderId,e.buySum,e.goodsPrice)}}},[n("b",[t._v("付款")])]):t._e(),"true"===e.payState&&"false"===e.deliverState&&"false"===e.receiveState?n("h2",[t._v(" 待发货 ")]):t._e(),"true"===e.payState&&"true"===e.deliverState&&"false"===e.receiveState?n("h2",[t._v(" 待签收 ")]):t._e(),"true"===e.payState&&"true"===e.deliverState&&"true"===e.receiveState?n("h2",[t._v(" 已签收 ")]):t._e()]},proxy:!0}],null,!0)})}))],2)},wt=[],Ot=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("ul",[n("li",[t._v("数量："+t._s(t.buySum))]),n("li",[t._v(" 总价： "),n("b",{staticStyle:{color:"red"}},[t._v("￥"+t._s(t.buySum*t.goodsPrice))])])])])},jt=[],Ct={props:["buySum2","goodsPrice2"],data:function(){return{name:"OrderSum",buySum:this.buySum2,goodsPrice:this.goodsPrice2}}},It=Ct,$t=Object(u["a"])(It,Ot,jt,!1,null,"e4421d24",null),At=$t.exports,Bt={name:"AllOrder",data:function(){return{loadingStatic:!0,isEmpty:!0,activeIndex:"3",goodsList:[]}},components:{GoodsCommon:E,OrderSum:At},created:function(){this.getGoods()},methods:{getGoods:function(){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function e(){var n,o,r,a,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return W.$emit("cl1",1),n=JSON.parse(localStorage.getItem("token")),e.next=4,v.a.get("/getAllOrder",{params:{userId:n.userId}});case 4:if(o=e.sent,r=o.data,""===r.goodsData){e.next=22;break}a=0;case 8:if(!(a<r.goodsData.length)){e.next=22;break}return e.next=11,v.a.get("/getGoodsOne",{params:{_id:r.goodsData[a].goodsID}});case 11:s=e.sent,i=s.data,i.goods.buySum=r.goodsData[a].buySum,i.goods.orderId=r.goodsData[a]._id,i.goods.payState=r.goodsData[a].payState,i.goods.deliverState=r.goodsData[a].deliverState,i.goods.receiveState=r.goodsData[a].receiveState,t.goodsList.unshift(i.goods);case 19:a++,e.next=8;break;case 22:t.isEmpty=r.isEmpty,t.loadingStatic=!1;case 24:case"end":return e.stop()}}),e)})))()},onBuy:function(t,e,n){var o=this;this.$confirm('<h4">请付款:</h4><h3 style="color:red">￥'+e*n+"</h3>","付款界面",{confirmButtonText:"确定",cancelButtonText:"取消",dangerouslyUseHTMLString:!0}).then((function(){v.a.get("/updataBuyStateOrder",{params:{orderId:t,payState:!0}}),o.$message({type:"success",showClose:!0,duration:"1000",message:"支付成功！"}),o.$router.go(0)})).catch(Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))))},onDelete:function(t,e,n,o,r){var a=this;this.$confirm('<h4">是否确认</h4><h3 style="color:red">删除</h3>',"确认删除界面",{confirmButtonText:"确定",cancelButtonText:"取消",dangerouslyUseHTMLString:!0}).then((function(){"false"===r&&v.a.get("/updateGoodsSum",{params:{goodsId:t,goodsSum:n+o}}),v.a.get("deleteOrder",{params:{orderId:e}}),a.$router.go(0)})).catch((function(){}))}}},Dt=Bt,Rt=(n("cdcf"),Object(u["a"])(Dt,kt,wt,!1,null,"e2d93bb8",null)),Gt=Rt.exports,Et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingStatic,expression:"loadingStatic"}],staticClass:"AllOrderContainer"},[t.isEmpty?n("el-empty",{attrs:{description:"购物车空空的哦！！！"}},[n("router-link",{attrs:{to:"/"}},[n("el-button",[t._v("去购物")])],1)],1):t._l(t.goodsList,(function(e){return n("GoodsCommon",{key:e.createAt,scopedSlots:t._u([{key:"goodsImg",fn:function(){return[n("el-image",{staticStyle:{width:"60px",height:"60px"},attrs:{src:e.goodsSRC,fit:"fit",lazy:""}})]},proxy:!0},{key:"goodsDetail",fn:function(){return[n("h4",[t._v(" "+t._s(e.goodsName)+" "),n("i",{staticStyle:{"margin-left":"20px"}},[t._v("单价：￥"+t._s(e.goodsPrice))])]),n("p",[t._v(t._s(e.goodsDetail))])]},proxy:!0},{key:"goodsBuySum",fn:function(){return[n("OrderSum",{attrs:{buySum2:e.buySum,goodsPrice2:e.goodsPrice}})]},proxy:!0},{key:"goodsBtn",fn:function(){return[n("el-button",{attrs:{type:"danger"},on:{click:function(n){return t.onDelete(e._id,e.orderId,e.goodsSum,e.buySum,e.receiveState)}}},[n("b",[t._v("删除")])])]},proxy:!0},{key:"goodsBuy",fn:function(){return[n("el-button",{attrs:{type:"success"},on:{click:function(n){return t.onBuy(e.orderId,e.buySum,e.goodsPrice)}}},[n("b",[t._v("付款")])])]},proxy:!0}],null,!0)})}))],2)},Lt=[],Nt={name:"AllOrder",data:function(){return{loadingStatic:!0,isEmpty:!0,activeIndex:"3",goodsList:[]}},components:{GoodsCommon:E,OrderSum:At},created:function(){this.getGoods()},methods:{getGoods:function(){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function e(){var n,o,r,a,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return W.$emit("cl2",2),n=JSON.parse(localStorage.getItem("token")),e.next=4,v.a.get("/getNoPayOrder",{params:{userId:n.userId,payState:!1}});case 4:if(o=e.sent,r=o.data,""===r.goodsData){e.next=20;break}a=0;case 8:if(!(a<r.goodsData.length)){e.next=20;break}return e.next=11,v.a.get("/getGoodsOne",{params:{_id:r.goodsData[a].goodsID}});case 11:s=e.sent,i=s.data,i.goods.buySum=r.goodsData[a].buySum,i.goods.orderId=r.goodsData[a]._id,i.goods.receiveState=r.goodsData[a].receiveState,t.goodsList.unshift(i.goods);case 17:a++,e.next=8;break;case 20:t.isEmpty=r.isEmpty,t.loadingStatic=!1;case 22:case"end":return e.stop()}}),e)})))()},onBuy:function(t,e,n){var o=this;this.$confirm('<h4">请付款:</h4><h3 style="color:red">￥'+e*n+"</h3>","付款界面",{confirmButtonText:"确定",cancelButtonText:"取消",dangerouslyUseHTMLString:!0}).then(Object(f["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/updataBuyStateOrder",{params:{orderId:t,payState:!0}});case 2:n=e.sent,r=n.data,console.log(r),o.$message({type:"success",showClose:!0,duration:"1000",message:"支付成功！"}),o.$router.go(0);case 7:case"end":return e.stop()}}),e)})))).catch(Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))))},onDelete:function(t,e,n,o,r){var a=this;this.$confirm('<h4">是否确认</h4><h3 style="color:red">删除</h3>',"确认删除界面",{confirmButtonText:"确定",cancelButtonText:"取消",dangerouslyUseHTMLString:!0}).then((function(){"false"===r&&(console.log(),v.a.get("/updateGoodsSum",{params:{goodsId:t,goodsSum:n+o}})),v.a.get("deleteOrder",{params:{orderId:e}}),a.$router.go(0)})).catch((function(){}))}}},Tt=Nt,Pt=(n("ea1b"),Object(u["a"])(Tt,Et,Lt,!1,null,"31ea42b6",null)),Ut=Pt.exports,Ht=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingStatic,expression:"loadingStatic"}],staticClass:"AllOrderContainer"},[t.isEmpty?n("el-empty",{attrs:{description:"购物车空空的哦！！！"}},[n("router-link",{attrs:{to:"/"}},[n("el-button",[t._v("去购物")])],1)],1):t._l(t.goodsList,(function(e){return n("GoodsCommon",{key:e.createAt,scopedSlots:t._u([{key:"goodsImg",fn:function(){return[n("el-image",{staticStyle:{width:"60px",height:"60px"},attrs:{src:e.goodsSRC,fit:"fit",lazy:""}})]},proxy:!0},{key:"goodsDetail",fn:function(){return[n("h4",[t._v(" "+t._s(e.goodsName)+" "),n("i",{staticStyle:{"margin-left":"20px"}},[t._v("单价：￥"+t._s(e.goodsPrice))])]),n("p",[t._v(t._s(e.goodsDetail))])]},proxy:!0},{key:"goodsBuySum",fn:function(){return[n("OrderSum",{attrs:{buySum2:e.buySum,goodsPrice2:e.goodsPrice}})]},proxy:!0},{key:"goodsBtn",fn:function(){return[n("el-button",{attrs:{type:"danger"},on:{click:function(n){return t.onDelete(e._id,e.orderId,e.goodsSum,e.buySum,e.receiveState)}}},[n("b",[t._v("删除")])])]},proxy:!0},{key:"goodsBuy",fn:function(){return[n("h2",[t._v("待发货")])]},proxy:!0}],null,!0)})}))],2)},Mt=[],Jt={name:"AllOrder",data:function(){return{loadingStatic:!0,isEmpty:!0,activeIndex:"3",goodsList:[]}},components:{GoodsCommon:E,OrderSum:At},created:function(){this.getGoods()},methods:{getGoods:function(){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function e(){var n,o,r,a,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return W.$emit("cl3",3),n=JSON.parse(localStorage.getItem("token")),e.next=4,v.a.get("/getNotDeliverGoodsOrder",{params:{userId:n.userId,payState:!0,deliverState:!1}});case 4:if(o=e.sent,r=o.data,""===r.goodsData){e.next=20;break}a=0;case 8:if(!(a<r.goodsData.length)){e.next=20;break}return e.next=11,v.a.get("/getGoodsOne",{params:{_id:r.goodsData[a].goodsID}});case 11:s=e.sent,i=s.data,i.goods.buySum=r.goodsData[a].buySum,i.goods.orderId=r.goodsData[a]._id,i.goods.receiveState=r.goodsData[a].receiveState,t.goodsList.unshift(i.goods);case 17:a++,e.next=8;break;case 20:t.isEmpty=r.isEmpty,t.loadingStatic=!1;case 22:case"end":return e.stop()}}),e)})))()},onDelete:function(t,e,n,o,r){var a=this;this.$confirm('<h4">是否确认</h4><h3 style="color:red">删除</h3>',"确认删除界面",{confirmButtonText:"确定",cancelButtonText:"取消",dangerouslyUseHTMLString:!0}).then((function(){"false"===r&&v.a.get("/updateGoodsSum",{params:{goodsId:t,goodsSum:n+o}}),v.a.get("deleteOrder",{params:{orderId:e}}),a.$router.go(0)})).catch((function(){}))}}},zt=Jt,qt=(n("7a4a"),Object(u["a"])(zt,Ht,Mt,!1,null,"432a09f4",null)),Ft=qt.exports,Kt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingStatic,expression:"loadingStatic"}],staticClass:"AllOrderContainer"},[t.isEmpty?n("el-empty",{attrs:{description:"购物车空空的哦！！！"}},[n("router-link",{attrs:{to:"/"}},[n("el-button",[t._v("去购物")])],1)],1):t._l(t.goodsList,(function(e){return n("GoodsCommon",{key:e.createAt,scopedSlots:t._u([{key:"goodsImg",fn:function(){return[n("el-image",{staticStyle:{width:"60px",height:"60px"},attrs:{src:e.goodsSRC,fit:"fit",lazy:""}})]},proxy:!0},{key:"goodsDetail",fn:function(){return[n("h4",[t._v(" "+t._s(e.goodsName)+" "),n("i",{staticStyle:{"margin-left":"20px"}},[t._v("单价：￥"+t._s(e.goodsPrice))])]),n("p",[t._v(t._s(e.goodsDetail))])]},proxy:!0},{key:"goodsBuySum",fn:function(){return[n("OrderSum",{attrs:{buySum2:e.buySum,goodsPrice2:e.goodsPrice}})]},proxy:!0},{key:"goodsBtn",fn:function(){return[n("el-button",{attrs:{type:"danger"},on:{click:function(n){return t.onDelete(e._id,e.orderId,e.goodsSum,e.buySum,e.receiveState)}}},[n("b",[t._v("删除")])])]},proxy:!0},{key:"goodsBuy",fn:function(){return[n("h2",[t._v("待收货")])]},proxy:!0}],null,!0)})}))],2)},Qt=[],Vt={name:"AllOrder",data:function(){return{loadingStatic:!0,isEmpty:!0,activeIndex:"3",goodsList:[]}},components:{GoodsCommon:E,OrderSum:At},created:function(){this.getGoods()},methods:{getGoods:function(){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function e(){var n,o,r,a,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return W.$emit("cl4",4),n=JSON.parse(localStorage.getItem("token")),e.next=4,v.a.get("/getNotReceiveGoodsOrder",{params:{userId:n.userId,payState:!0,deliverState:!0,receiveState:!1}});case 4:if(o=e.sent,r=o.data,""===r.goodsData){e.next=20;break}a=0;case 8:if(!(a<r.goodsData.length)){e.next=20;break}return e.next=11,v.a.get("/getGoodsOne",{params:{_id:r.goodsData[a].goodsID}});case 11:s=e.sent,i=s.data,i.goods.buySum=r.goodsData[a].buySum,i.goods.orderId=r.goodsData[a]._id,i.goods.receiveState=r.goodsData[a].receiveState,t.goodsList.unshift(i.goods);case 17:a++,e.next=8;break;case 20:t.isEmpty=r.isEmpty,t.loadingStatic=!1;case 22:case"end":return e.stop()}}),e)})))()},onDelete:function(t,e,n,o,r){var a=this;this.$confirm('<h4">是否确认</h4><h3 style="color:red">删除</h3>',"确认删除界面",{confirmButtonText:"确定",cancelButtonText:"取消",dangerouslyUseHTMLString:!0}).then((function(){"false"===r&&v.a.get("/updateGoodsSum",{params:{goodsId:t,goodsSum:n+o}}),v.a.get("deleteOrder",{params:{orderId:e}}),a.$router.go(0)})).catch((function(){}))}}},Wt=Vt,Xt=(n("2327"),Object(u["a"])(Wt,Kt,Qt,!1,null,"162dce5a",null)),Yt=Xt.exports,Zt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"Admin"},[n("ul",[n("li",[n("AsideAdmin")],1),n("li",[n("router-view")],1)])])},te=[],ee={data:function(){return{name:"Admin"}},methods:{}},ne=ee,oe=(n("387c"),Object(u["a"])(ne,Zt,te,!1,null,"775db448",null)),re=oe.exports,ae=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"AdminGoods"},[n("HeaderAdmin",{scopedSlots:t._u([{key:"search",fn:function(){return[n("div",{staticStyle:{width:"50%"}},[n("el-input",{staticStyle:{width:"40%"},attrs:{placeholder:"请输入商品名称"},model:{value:t.searchInput,callback:function(e){t.searchInput=e},expression:"searchInput"}}),n("el-button",{staticStyle:{width:"20%","max-width":"80px","margin-left":"6%"}},[t._v("搜索")]),n("el-button",{staticStyle:{width:"20%","max-width":"80px","margin-left":"10%"},attrs:{type:"primary"}},[t._v("添加")])],1)]},proxy:!0}])}),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"AdminContent"},[t.isEmpty?n("el-empty"):t._l(t.goodsList,(function(e){return n("GoodsCommon",{key:e._id,scopedSlots:t._u([{key:"goodsImg",fn:function(){return[n("el-image",{staticStyle:{width:"60px",height:"60px"},attrs:{src:e.goodsSRC,fit:"fit",lazy:""}})]},proxy:!0},{key:"goodsDetail",fn:function(){return[n("h4",[t._v(" "+t._s(e.goodsName)+" "),n("i",{staticStyle:{"margin-left":"30px"}},[t._v("单价："+t._s(e.goodsPrice))]),n("i",{staticStyle:{"margin-left":"30px"}},[t._v("库存："+t._s(e.goodsSum))])]),n("p",[t._v(t._s(e.goodsDetail))])]},proxy:!0},{key:"goodsBuySum",fn:function(){},proxy:!0},{key:"goodsBtn",fn:function(){return[n("el-button",{attrs:{type:"danger"}},[n("b",[t._v("删除")])])]},proxy:!0},{key:"goodsBuy",fn:function(){return[n("el-button",{attrs:{type:"success"}},[n("b",[t._v("修改")])])]},proxy:!0}],null,!0)})}))],2),n("div",{staticClass:"block"},[n("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":t.pageSize,total:t.count},on:{"current-change":t.getGoods}})],1)],1)},se=[],ie={data:function(){return{name:"AdminGoods",searchInput:"",count:0,pageSize:12,Skip:0,isEmpty:!0,loading:!0,goodsList:[]}},components:{GoodsCommon:E},created:function(){this.getGoods()},methods:{getGoods:function(t){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function n(){var o,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.loading=!0,void 0===t&&(t=1),t<e.count/12+1&&(e.Skip=12*(t-1)),n.next=5,v.a.get("/getGoods",{params:{count:e.Skip}});case 5:o=n.sent,r=o.data,e.goodsList=[],e.goodsList=r.data,e.count=r.goodsCount,e.goodsList.length>0&&(e.isEmpty=!1),e.loading=!1;case 12:case"end":return n.stop()}}),n)})))()}}},ue=ie,ce=(n("f214"),Object(u["a"])(ue,ae,se,!1,null,"0d067290",null)),de=ce.exports,le=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"AdminGoods"},[n("HeaderAdmin",{scopedSlots:t._u([{key:"search",fn:function(){return[n("div",{staticStyle:{width:"50%"}},[n("el-input",{staticStyle:{width:"40%"},attrs:{placeholder:"请输入商品名称"},model:{value:t.searchInput,callback:function(e){t.searchInput=e},expression:"searchInput"}}),n("el-button",{staticStyle:{width:"20%","max-width":"80px","margin-left":"6%"}},[t._v("搜索")]),n("el-button",{staticStyle:{width:"20%","max-width":"80px","margin-left":"10%"},attrs:{type:"primary"}},[t._v("添加")])],1)]},proxy:!0}])}),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"AdminContent"},[t.isEmpty?n("el-empty"):t._l(t.goodsList,(function(e){return n("GoodsCommon",{key:e._id,scopedSlots:t._u([{key:"goodsImg",fn:function(){return[n("el-image",{staticStyle:{width:"60px",height:"60px"},attrs:{src:e.goodsSRC,fit:"fit",lazy:""}})]},proxy:!0},{key:"goodsDetail",fn:function(){return[n("h4",[t._v(" 名称："+t._s(e.goodsName)+" "),n("i",{staticStyle:{"margin-left":"30px"}},[t._v("单价："+t._s(e.goodsPrice))]),n("i",{staticStyle:{"margin-left":"30px"}},[t._v("库存："+t._s(e.goodsSum))])]),n("p",[t._v(t._s(e.goodsDetail))])]},proxy:!0},{key:"goodsBuySum",fn:function(){},proxy:!0},{key:"goodsBtn",fn:function(){return[n("el-button",{attrs:{type:"danger"}},[n("b",[t._v("删除")])])]},proxy:!0},{key:"goodsBuy",fn:function(){return[n("el-button",{attrs:{type:"success"}},[n("b",[t._v("修改")])])]},proxy:!0}],null,!0)})}))],2),n("div",{staticClass:"block"},[n("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":t.pageSize,total:t.count},on:{"current-change":t.getGoods}})],1)],1)},me=[],ge={data:function(){return{name:"AdminGoods",searchInput:"",count:0,pageSize:12,Skip:0,isEmpty:!0,loading:!0,goodsList:[]}},components:{GoodsCommon:E},created:function(){this.getGoods()},methods:{getGoods:function(t){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function n(){var o,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.loading=!0,void 0===t&&(t=1),t<e.count/12+1&&(e.Skip=12*(t-1)),n.next=5,v.a.get("/getGoods",{params:{count:e.Skip}});case 5:o=n.sent,r=o.data,e.goodsList=[],e.goodsList=r.data,e.count=r.goodsCount,e.goodsList.length>0&&(e.isEmpty=!1),e.loading=!1;case 12:case"end":return n.stop()}}),n)})))()}}},pe=ge,fe=(n("3611"),Object(u["a"])(pe,le,me,!1,null,"0c5a6652",null)),he=fe.exports,ve=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingStatic,expression:"loadingStatic"}],staticClass:"positionDiv"},[t._m(0),n("div",[n("label",{attrs:{for:"username"}},[t._v("账 号：")]),n("el-input",{attrs:{id:"username",placeholder:"请输入账号",clearable:""},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),n("div",[n("label",{attrs:{for:"password"}},[t._v("密 码：")]),n("el-input",{attrs:{id:"password",placeholder:"请输入密码","show-password":""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),n("div",{staticClass:"tj"},[n("el-button",{on:{click:t.submin}},[t._v("提交")]),n("el-button",{on:{click:t.jumpGoods}},[t._v("网站首页")])],1)])},Se=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tt"},[n("h1",[t._v("管理员-登录界面")])])}],ye={name:"AdminLogin",data:function(){return{loadingStatic:!0,username:"",password:""}},created:function(){this.signIn()},mounted:function(){this.loadingStatic=!1},destroyed:function(){this.loadingStatic=!0},methods:{signIn:function(){var t=localStorage.getItem("tokenAdmin");null===t&&this.$message({message:"请登录！",type:"error",duration:"1000"})},submin:function(){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function e(){var n,o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.loadingStatic=!0,""!==t.username&&""!==t.password){e.next=6;break}t.loadingStatic=!1,t.$message({message:"用户名或密码不能为空！",type:"error",duration:"1000"}),e.next=12;break;case 6:if(""===t.username||""===t.password){e.next=12;break}return e.next=9,v.a.get("/getAdmin",{params:{username:t.username,password:t.password}});case 9:n=e.sent,o=n.data,o.data===t.username?(r={userId:o.userId,username:o.data},localStorage.setItem("tokenAdmin",JSON.stringify(r)),t.$message({message:"欢迎您："+o.data,type:"success",duration:"1000"}),t.$router.replace("/jumpAdmin")):(t.loadingStatic=!1,t.$message.error(o.data));case 12:case"end":return e.stop()}}),e)})))()},jumpGoods:function(){this.$router.replace("/")}}},be=ye,xe=(n("cc19"),Object(u["a"])(be,ve,Se,!1,null,"7b0b6586",null)),_e=xe.exports,ke=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("HeaderAdmin",{scopedSlots:t._u([{key:"search",fn:function(){return[n("div",{staticStyle:{width:"50%"}},[n("el-input",{staticStyle:{width:"35%"},attrs:{placeholder:"请输入商品名称"},model:{value:t.searchInput,callback:function(e){t.searchInput=e},expression:"searchInput"}}),n("el-button",{staticStyle:{"margin-left":"6%"}},[t._v("搜索")]),n("el-button",{staticStyle:{"margin-left":"10%"},attrs:{type:"primary"}},[t._v("添加")])],1)]},proxy:!0}])}),n("div",{staticClass:"AdminOrderContent"},[n("el-empty")],1)],1)},we=[],Oe={data:function(){return{name:"AdminOrder",searchInput:""}}},je=Oe,Ce=Object(u["a"])(je,ke,we,!1,null,"062d20ce",null),Ie=Ce.exports;o["default"].use(l["a"]);var $e=[{path:"/",component:x},{path:"/jumpDetail",component:C},{path:"/jumpShoppingCar",component:q},{path:"/jumpUsers",component:dt},{path:"/jumpLogin",component:ht},{path:"/jumpRegister",component:_t},{path:"/jumpOrder",component:rt,redirect:"/jumpOrder/jumpAllOrder",children:[{path:"jumpAllOrder",component:Gt},{path:"jumpNoPayOrder",component:Ut},{path:"jumpNotDeliverGoodsOrder",component:Ft},{path:"jumpNotReceiveGoodsOrder",component:Yt}]},{path:"/jumpAdminLogin",component:_e},{path:"/jumpAdmin",component:re,redirect:"/jumpAdmin/jumpAdminGoods",children:[{path:"jumpAdminGoods",component:he},{path:"jumpAdminUser",component:de},{path:"jumpAdminOrder",component:Ie}]}],Ae=new l["a"]({routes:$e});Ae.beforeEach((function(t,e,n){var o=localStorage.getItem("token"),r=localStorage.getItem("tokenAdmin");"/"===t.path||"/jumpLogin"===t.path||"/jumpRegister"===t.path||"/jumpAdminLogin"===t.path?n():"/jumpAdmin"===t.path||"/jumpAdmin/jumpAdminGoods"===t.path||"/jumpAdmin/jumpAdminUser"===t.path||"/jumpAdmin/jumpAdminOrder"===t.path?r?n():n("/jumpAdminLogin"):o?n():n("/jumpLogin")}));var Be=Ae,De=n("5c96"),Re=n.n(De),Ge=(n("0fae"),n("3aff"),n("83e1"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"Header"},[n("el-menu",{attrs:{"default-active":t.activeIndex,mode:"horizontal"}},[n("el-menu-item",{staticStyle:{"margin-left":"1%",padding:"0"},attrs:{index:"1"}},[n("router-link",{staticStyle:{display:"block",height:"100%",width:"100%",padding:"0 20px 0 20px","font-weight":"bold"},attrs:{to:"/"}},[t._v("首页")])],1),n("el-menu-item",{staticStyle:{padding:"0"},attrs:{index:"2"}},[n("router-link",{staticStyle:{display:"block",height:"100%",width:"100%",padding:"0 20px 0 20px","font-weight":"bold"},attrs:{to:"/jumpShoppingCar"}},[t._v("购物车")])],1),n("el-menu-item",{staticStyle:{padding:"0"},attrs:{index:"3"}},[n("router-link",{staticStyle:{display:"block",height:"100%",width:"100%",padding:"0 20px 0 20px","font-weight":"bold"},attrs:{to:"/jumpOrder"}},[t._v("订单")])],1),n("el-submenu",{staticClass:"yhdw",attrs:{index:"4"}},[n("template",{slot:"title"},[n("h3",{staticClass:"yh"},[t._v("用户名："+t._s(t.username))])]),t.tokenStatic?n("div",[n("el-menu-item",{attrs:{index:"4-1"}},[n("router-link",{staticStyle:{display:"block",width:"100%"},attrs:{to:"/jumpUsers"}},[t._v("个人信息")])],1),n("el-menu-item",{staticStyle:{display:"block",width:"100%"},on:{click:t.out}},[t._v("退出")])],1):n("div",[n("el-menu-item",{attrs:{index:"4-1"}},[n("router-link",{staticStyle:{display:"block",width:"100%"},attrs:{to:"/jumpLogin"}},[t._v("登录")])],1),n("el-menu-item",[n("router-link",{staticStyle:{display:"block",width:"100%"},attrs:{to:"/jumpRegister"}},[t._v("注册")])],1)],1)],2)],1)],1)}),Ee=[],Le={name:"Header",props:["activeI"],data:function(){return{activeIndex:this.activeI,username:"未登录",tokenStatic:!1}},created:function(){this.login()},methods:{login:function(){var t=JSON.parse(localStorage.getItem("token"));t&&(this.username=t.username,this.tokenStatic=!0)},out:function(){localStorage.removeItem("token"),this.username="未登录",this.tokenStatic=!1,"#/"!==location.hash&&this.$router.replace("/")}}},Ne=Le,Te=(n("7fd6"),Object(u["a"])(Ne,Ge,Ee,!1,null,"5cd5ac30",null)),Pe=Te.exports,Ue=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"AsideAdmin"},[n("ul",[n("li",{ref:"click_bg",on:{click:t.click_bg}},[n("router-link",{attrs:{to:"/jumpAdmin/jumpAdminGoods"}},[t._v("商品管理")])],1),n("li",{ref:"click_bg2",on:{click:t.click_bg2}},[n("router-link",{attrs:{to:"/jumpAdmin/jumpAdminUser"}},[t._v("用户管理")])],1),n("li",{ref:"click_bg3",on:{click:t.click_bg3}},[n("router-link",{attrs:{to:"/jumpAdmin/jumpAdminOrder"}},[t._v("订单管理")])],1)])])},He=[],Me={name:"AsideAdmin",mounted:function(){this.getSelect()},methods:{getSelect:function(){var t=location.hash;switch(t){case"#/jumpAdmin/jumpAdminGoods":this.$refs.click_bg.style.backgroundColor="#007acc",this.$refs.click_bg2.style.backgroundColor="",this.$refs.click_bg3.style.backgroundColor="";break;case"#/jumpAdmin/jumpAdminUser":this.$refs.click_bg.style.backgroundColor="",this.$refs.click_bg2.style.backgroundColor="#007acc",this.$refs.click_bg3.style.backgroundColor="";break;case"#/jumpAdmin/jumpAdminOrder":this.$refs.click_bg.style.backgroundColor="",this.$refs.click_bg2.style.backgroundColor="",this.$refs.click_bg3.style.backgroundColor="#007acc";break}},click_bg:function(){this.getSelect()},click_bg2:function(){this.getSelect()},click_bg3:function(){this.getSelect()}}},Je=Me,ze=(n("2b9c"),Object(u["a"])(Je,Ue,He,!1,null,"3a521974",null)),qe=ze.exports,Fe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"AdminHeader"},[n("div",{staticStyle:{width:"20%","min-width":"150px","font-size":"30px","font-weight":"bold","margin-left":"10px"}},[t._v(" 管理员界面 ")]),t._t("search"),n("div",{staticStyle:{width:"30%","min-width":"140px"}},[t._v(" 用户名："),n("b",[t._v(t._s(t.admin))]),n("a",{staticStyle:{"margin-left":"10%"},attrs:{href:"#"},on:{click:t.out}},[t._v("退出")])])],2)])},Ke=[],Qe={data:function(){return{name:"HeaderAdmin",admin:"未登录"}},created:function(){this.getAdmin()},methods:{getAdmin:function(){var t=JSON.parse(localStorage.getItem("tokenAdmin")).username;this.admin=t},out:function(){localStorage.removeItem("tokenAdmin"),this.$router.replace("/jumpAdminLogin")}}},Ve=Qe,We=(n("5160"),Object(u["a"])(Ve,Fe,Ke,!1,null,"bc32fee0",null)),Xe=We.exports;o["default"].component("Header",Pe),o["default"].component("AsideAdmin",qe),o["default"].component("HeaderAdmin",Xe),o["default"].use(Re.a),o["default"].config.productionTip=!1,new o["default"]({router:Be,render:function(t){return t(d)}}).$mount("#app")},"57fe":function(t,e,n){},"62dd":function(t,e,n){},6623:function(t,e,n){},"67e4":function(t,e,n){},"6d54":function(t,e,n){"use strict";n("6623")},"7a4a":function(t,e,n){"use strict";n("67e4")},"7fd6":function(t,e,n){"use strict";n("9f00")},8086:function(t,e,n){"use strict";n("140e")},"83e1":function(t,e,n){},"9f00":function(t,e,n){},ae52:function(t,e,n){},b775:function(t,e,n){var o=n("bc3a"),r=o.create({baseURL:"http://127.0.0.1:3000/"});t.exports=r},b926:function(t,e,n){},cc19:function(t,e,n){"use strict";n("57fe")},cdcf:function(t,e,n){"use strict";n("3bb1")},d8a6:function(t,e,n){"use strict";n("49a0")},e299:function(t,e,n){},e535:function(t,e,n){},ea1b:function(t,e,n){"use strict";n("e299")},ef92:function(t,e,n){"use strict";n("b926")},f214:function(t,e,n){"use strict";n("ae52")},ff30:function(t,e,n){}});
//# sourceMappingURL=app.5606206b.js.map